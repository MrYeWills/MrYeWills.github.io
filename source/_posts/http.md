---
title: http协议
date: {{ date }}
tags: [前端, http协议]
categories: 
- 前端
---

## html协议基础
### 层网络模型
#### 介绍
如图，我们只需理解应用层与传输层的作用，其他三层，知道就行。
![](/image/http/compose.jpg)
#### 传输层
[参考](https://www.jianshu.com/p/e1f33cc26aca)
- 向用户提供可靠的端到端（end-to-end）服务；
- 传输层向高层屏蔽了下层数据通信的细节（比如一个post请求，如何分片如何发送使服务端很好接收到，这个规则由传输层实现，应用层的HTTP不用关心这些，但是适当理解对HTTP更好地使用是很有帮助的）。

#### 应用层
- 为应用软件提供了很多服务；
- 帮我们实现了HTTP协议，我们只要按照规则去使用HTTP协议；
- 它构建于TCP协议之上；屏蔽了网络传输相关细节。

### HTTP协议的发展历史
#### http/0.9
- 只有get
- 么有header等描述信息
- 服务器发送完毕，就关闭tcp连接
#### http/1.0
- 增加很多方式如 post put。。。
- 增加 status code 和 header
- 缓存、权限等
#### http/1.1 （当前的http协议）
- 持久连接
- pipeline
- 增加host和其他命令
#### http2 （还未普及）
- 所有数据以二进制传输
- 同一个连接里面发送多个请求不再需要按顺序来
- 头信息压缩以及后端主动推送等功能
关于头信息压缩：
在http1中，头信息如 Content-Type等，都是以字符串的形式保存，这些都比较占带宽；
在http2中，对头信息进行压缩，从而减少对带宽的占用。
关于 主动推送：
在http1中，向后台发送一个html请求，前台获得html后，经过浏览器解析，再次向后台发起css或js的请求；
http2中，向后台发起一个页面请求时，后台会将html和html内的css js 主动一次性推送给浏览器，提高性能。

### tcp三次握手
如图，tcp三次握手，**主要是解决客户端与服务端相隔很多远，通过光纤传输，容易出现延时和连接中断等问题**；
第一次握手：客户端发消息给服务端，申请建立tcp连接；
第二次握手：客户端接收请求后，新建端口，用于tcp连接，并且向客户端发消息，验证客户端是否能正常接收来自客户端的消息；
第三次握手：客户端向服务端发消息说，我能正常接收到你那边发来的消息，你就放心的建立tcp连接吧。服务端接收到此消息后，建立tcp连接成功。

进一步解释下：
第一次握手，验证服务端能正常接收到客户端消息；
第二次握手，验证客服端能正常接收到服务端消息；
一来一往，两边都能接收到双方消息；
第三次握手，直接与服务端建立tcp连接。
![](/image/http/tcp.jpg)

